function drawTable(){function t(){var t=(a-600)/2;return a<=830?a<=510?10:6:t<190?190:t}function e(t,e){function n(t){function n(){d3.selectAll(".media-rect").classed("selected",!1),d3.select(".tip").style("opacity",0).style("left","-1000px").style("top","-1000px")}function g(t){var e=".media-rect."+jz.str.toSlugCase(t.book)+".y-"+t.year;d3.select(e).classed("selected",!0),d.select(".title").html(t.name),d.select(".basic-info").html(t.year+" <span style='color: "+h[jz.str.toSlugCase(t.type)]+"'>"+t.type+"</span>"+(t.actor?" starring "+t.actor:"")),d.select(".cover-image").html("book"==t.type||"true"==t.image?"<img src='img/covers/"+jz.str.toSnakeCase(t.name)+"_"+t.year+".jpg' />":""),d.select(".close-tip").html("<i class='fa fa-times' aria-hidden='true'></i>");var n=d3.select(e).node().getBoundingClientRect(),r=d3.select(".tip").node().getBoundingClientRect(),i=window.pageYOffset,l=n.left-r.width/2;l=l<0?n.left:l+r.width>a?n.left-r.width+o:l;var c=i+n.top-r.height-5;c=c<i+40?i+n.top+n.height+5:c,d3.select(".tip").style("opacity",.98).style("left",l+"px").style("top",c+"px")}function v(t){return t.hide?"#eee":h[jz.str.toSlugCase(t.type)]}function w(t,e,a){var n=(f(t.book),m(t.year)),r="none";A.filter(function(e){return e.book==t.book}).map(function(t){return{book:t.book,name:t.name,type:t.type,year:t.year,x:m(t.year)}}).forEach(function(t){n<t.x&&n+o>t.x?r="top":t.x<n&&t.x+o>n&&(r="bottom")});var i=k(t)-c/2;return"top"==r?i-c/2-1:"bottom"==r?i+c/2+1:i}function k(t){return f(t.book)+f.bandwidth()/2+r}var x=jz.arr.uniqueBy(e,"book").map(function(t){var a=e.filter(function(e){return e.book==t});return{type:"book",name:t,book:t,adaptation_count:a.length,year:a[0].book_year}});x="adaptation_count"==t?jz.arr.flatten(jz.arr.uniqueBy(x,t).reverse().map(function(t){return jz.arr.sortBy(x.filter(function(e){return e.adaptation_count==t}),"year")})):jz.arr.sortBy(x,t);var _=d3.select(".search-field").property("value");if(""!=_){x.forEach(function(t){if(t.book.toLowerCase().indexOf(_.toLowerCase())==-1)return t.hide=!0,t});var z=x.filter(function(t){return!t.hide}),j=x.filter(function(t){return t.hide});x=jz.arr.flatten([z,j])}f.domain(x.map(function(t){return t.book}));var A=jz.arr.flatten([e.map(function(t){var e=x.filter(function(e){return e.book==t.book})[0];return{type:t.adaptation_type,name:t.adaptation,book:t.book,year:t.adaptation_year,hide:!!e.hide,actor:t.adapatation_actor,image:t.image}}).filter(function(t){return x.map(function(t){return t.book}).indexOf(t.book)!=-1}),x]),T=p.selectAll(".baseline").data(x,function(t){return t.name+t.year}),C=p.selectAll(".book-title").data(x,function(t){return t.name+t.year}),S=p.selectAll(".media-rect").data(A,function(t){return t.name+t.year}),E=p.selectAll(".media-outline").data(A,function(t){return t.name+t.year});if(T.transition().attr("y1",k).attr("y2",k),C.transition().attr("y",function(t){return f(t.book)}).style("fill",function(t){return t.hide?"#888":"black"}),S.transition().attr("y",w).style("fill",v),E.transition().attr("y",function(t){return w(t)-(b-c)/2}),T.enter().append("line").attr("class","baseline").attr("x1",0).attr("x2",s).attr("y1",k).attr("y2",k),C.enter().append("text").attr("class","book-title").attr("x",0).attr("y",function(t){return f(t.book)}).attr("dy",a<=510?r-18:r).style("fill",function(t){return t.hide?"#eee":"black"}).html(function(t){return t.book+" <tspan>Published in "+t.year+" | "+t.adaptation_count+" adaptation"+(1==t.adaptation_count?"":"s")+"</tspan>"}),S.enter().append("rect").attr("class",function(t){return"media-rect "+jz.str.toSlugCase(t.book)+" y-"+t.year}).attr("x",function(t){return m(t.year)-o/2}).attr("y",w).attr("width",o).attr("height",c).style("fill",v),E.enter().append("rect").attr("class",function(t){return"media-outline "+jz.str.toSlugCase(t.book)+" y-"+t.year}).attr("x",function(t){return m(t.year)-y/2}).attr("y",function(t){return w(t)-(b-c)/2}).attr("width",y).attr("height",b).style("fill","transparent"),a<=510){var $=p.selectAll(".book-subtitle").data(x,function(t){return t.name+t.year});$.transition().attr("y",function(t){return f(t.book)}),$.enter().append("text").attr("class","book-subtitle").attr("x",0).attr("y",function(t){return f(t.book)}).attr("dy",r).html(function(t){return"Published in "+t.year+" | "+t.adaptation_count+" adaptation"+(1==t.adaptation_count?"":"s")})}var B=i.map(function(t){var e=A.filter(function(e){return e.name==t.name&&e.year==t.year})[0],n={note:{},connector:{}},r=m(t.year)/s<.5?"left":"right";return n.note.title=t.name+" ("+t.year+")",n.className=jz.str.toSlugCase(n.note.title),a>830?(n.note.align="left"==r?"right":"left",n.note.label=t.label,n.x=m(t.year)+("right"==r?o/2:-o/2),n.y=w(t)+c/2,n.dy=u-n.y<200?-30:30,n.dx="left"==r?-m(t.year)-60:s-m(t.year)+60,n.connector.end="arrow",n.color=e.hide?"#ccc":h[t.type]):(n.note.label=t.short_label,"left"==r?n.note.align="left":s>m(t.year)+100||(n.note.align="right"),n.color=e.hide?"#ccc":h[t.type],d3.timeout(function(){d3.select(".annotation."+n.className+" .annotation-note-label").attr("y","left"==r?-8:0).style("fill",n.color)},10),n.x=m(t.year)+("left"==r?o/2:0),n.y=w(t)+("left"==r?c/2:5),n.dx="right"==r?0:(10+o)/2,n.dy="right"==r?c:0,n.note.wrap=200),d3.select("."+n.className+" .annotation-note-label").style("fill",e.hide?"#ccc":"#000"),n});l.annotations(B),p.select(".annotation-group").call(l),isMobile&&d3.select(".tip").on("click",n),p.selectAll(".media-outline").on("mouseout",n).on("mouseover",g),d3.timeout(function(){d3.select(".media-rect.murder-on-the-orient-express.y-2017").moveToFront(),d3.select(".media-outline.murder-on-the-orient-express.y-2017").moveToFront()},2e3)}if(t)throw t;e.forEach(function(t){return t.adaptation_year=+t.adaptation_year,t.book_year=+t.book_year,t.adaptation=t.adaptation.trim(),t}),m.domain(d3.extent(jz.arr.flatten([d3.extent(e,function(t){return t.adaptation_year}),d3.extent(e,function(t){return t.book_year})]))),f.domain(jz.arr.uniqueBy(e,"book"));var o=f.bandwidth()/4.5,c=f.bandwidth()/3,y=1.5*o*1.5,b=1.5*c;n(d3.select(".toggle-item.active").attr("data-which")),d3.selectAll(".toggle-item").on("click",function(t){d3.selectAll(".toggle-item").classed("active",!1),d3.select(".toggle-item."+t.id).classed("active",!0),n(t.id)}),d3.select(".search-field").on("keyup",function(t){n(d3.select(".toggle-item.active").attr("data-which"))}),p.append("g").attr("class","annotation-group").call(l)}$("#viz #table").empty(),$(".tip").remove();var a=$(window).width(),n=a>830?a:d3.min([600,a-40]),r=a<=510?30:12,o={left:t(),right:t()},i=[{name:"Murder on the Orient Express",book:"Murder on the Orient Express",year:"2017",label:"This year's release was directed by Kenneth Branagh, who also stars as Poirot.",short_label:"The new movie",type:"film"},{name:"Lord Edgware Dies",book:"Lord Edgware Dies",year:"1934",label:"The first Poirot book adapted into a movie was released the year after publication.",short_label:"The first Poirot movie",type:"film"},{name:"The Mysterious Affair at Styles",book:"The Mysterious Affair at Styles",year:"1920",label:"The first Poirot book by Agatha Christie.",short_label:"The first Poirot book",type:"book"},{name:"Agatha Christie's Poirot: The Mysterious Affair at Styles",book:"The Mysterious Affair at Styles",year:"1990",label:"The first time David Suchet played Poirot in the TV series.",short_label:"The first David Suchet episode",type:"tv-series"},{name:"Curtain",book:"Curtain",year:"1975",label:"The final Poirot book has a shocking murderer.",short_label:"The last Poirot book",type:"book"},{name:"Death on the Nile",book:"Death on the Nile",year:"1978",label:"The first movie in which Peter Ustinov played Poirot. He played him six times in all.",short_label:"The first Peter Ustinov movie",type:"film"}],l=d3.annotation().type(a<=830?d3.annotationLabel:d3.annotationCallout),d=d3.select("body").append("div").attr("class","tip");d.append("div").attr("class","close-tip"),d.append("div").attr("class","title"),d.append("div").attr("class","basic-info datum"),d.append("div").attr("class","actor datum"),d.append("div").attr("class","cover-image");var c=d3.marcon().element("#table").width(n).height(a<=510?3e3:2200).right(o.right).left(o.left);c.render();var s=c.innerWidth(),u=c.innerHeight(),p=c.svg(),m=d3.scaleLinear().range([0,s]),f=d3.scaleBand().rangeRound([0,u]).padding(.3).align(.01),y={red:"#df5a49",blue:"#2880b9",green:"#45b29d"},h={"tv-series":y.red,"tv-film":y.blue,film:y.green,book:"black"},b=[{id:"year",text:"<b>Year</b> of publication"},{id:"name",text:"<b>Name</b> of book"},{id:"adaptation_count",text:"Number of <b>adaptations</b>"}];d3.select(".sort-wrapper").selectAll(".toggle-item").data(b).enter().append("div").attr("class",function(t){return"toggle-item "+jz.str.toSlugCase(t.id)+("adaptation_count"==t.id?" active":"")}).attr("data-which",function(t){return t.id}).html(function(t){return t.text}),d3.queue().defer(d3.csv,"data/films.csv").await(e)}function drawGender(){var t=!0;$("#gender-chart").empty(),$(".gender-tip").remove();var e=$(window).width(),a=d3.select("#gender-chart").append("div").attr("class","gender-tip");a.append("div").attr("class","book-name"),a.append("div").attr("class","type murderer"),a.append("div").attr("class","kill"),a.append("div").attr("class","type victim");var n={red:"#df5a49",blue:"#2880b9",green:"#45b29d"},r={man:n.blue,woman:n.red},o={left:30,top:60},i=d3.marcon().element("#gender-chart").width(+jz.str.keepNumber(d3.select("#gender-chart").style("width"))).height(e<510?400:600).left(o.left).right(o.left).top(o.top).bottom(20);i.render();var l=i.innerWidth(),d=i.innerHeight(),c=i.svg(),s=d3.scaleBand().rangeRound([0,l]),u=d3.scaleLinear().rangeRound([0,d]),p=e<510?5:8;d3.csv("data/gender.csv",function(a,n){function i(a){function i(t){return s("#gender-chart",".cell."+jz.str.toSlugCase(t.name)+" circle").left-o.left+("murderer"==t.type?2*p:0)}function d(t){return("murderer"==t.type?-50:50)+l/2}function s(t,e){var a=d3.select(t).node().getBoundingClientRect(),n=d3.select(e).node().getBoundingClientRect(),r={};return r.top=n.top-a.top,r.right=n.right-a.right,r.bottom=n.bottom-a.bottom,r.left=n.left-a.left,r}d3.selectAll(".cell").classed("selected",!1),d3.selectAll(".cell."+jz.str.toSlugCase(a.data.book)).classed("selected",!0);var m=y.filter(function(t){return t.book==a.data.book})[0],f="<span style='color: "+r.man+"'>"+m.murderer_man+" "+(1==m.murderer_man?"man":"men")+"</span>",h="<span style='color: "+r.woman+"'>"+m.murderer_woman+" "+(1==m.murderer_woman?"woman":"women")+"</span>",b=m.murderer_man>0&&m.murderer_woman>0?f+" &amp; "+h:m.murderer_man>0?f:h,g="<span style='color: "+r.man+"'>"+m.victim_man+" "+(1==m.victim_man?"man":"men")+"</span>",v="<span style='color: "+r.woman+"'>"+m.victim_woman+" "+(1==m.victim_woman?"woman":"women")+"</span>",w=m.victim_man>0&&m.victim_woman>0?g+" &amp; "+v:m.victim_man>0?g:v;d3.select(".gender-tip .book-name").html(a.data.book+" ("+a.data.book_year+")"),d3.select(".gender-tip .type.murderer").html(b),d3.select(".gender-tip .kill").html(1==d3.sum([m.murderer_man,m.murderer_woman])?"kills":"kill"),d3.select(".gender-tip .type.victim").html(w);var k=d3.select(".gender-tip").node().getBoundingClientRect(),x=u(a.data.book_year),_=$("#gender-chart svg").position(),z=x-(e<510?.8*k.height:1.2*k.height)+_.top;z=z<_.top?_.top:z,t?t=!1:z=z<$(window).scrollTop()+40?$(window).scrollTop()+40:z,d3.select(".gender-tip").style("left",e/2-k.width/2+"px").style("top",z+"px");var j=n.filter(function(t){return t.book==a.data.book});j.forEach(function(t){var a=i(t),n=d(t),r=u(t.book_year),o=z-_.top,l="Murder on the Orient Express"==t.book;t.points=[{x:"murderer"==t.type?a-p:n,y:"murderer"==t.type?r-(l?0:p):o},{x:"murderer"==t.type?n:a+(r<50?2*-p:0),y:"murderer"==t.type?o:r+(r<50?0:2*-p)}],e<510&&(t.points[1].x+=5)});var A=c.selectAll(".tip-line").data(j,function(t){return t.name});A.exit().remove();var T=!1;A.enter().append("path").attr("class","tip-line").attr("d",function(t){var e=t.points[1].x-t.points[0].x,a=t.points[1].y-t.points[0].y,n=Math.sqrt(e*e+a*a);return"M"+t.points[0].x+","+t.points[0].y+"A"+n+","+n+" 0 0,1 "+t.points[1].x+","+t.points[1].y}).attr("marker-end",function(t){return"murderer"!=t.type||T?"murderer"!==t.type?"url(#markerArrow)":"":(T=!0,"url(#markerArrow)")})}n.forEach(function(t){return t.book_year=+t.book_year,t});var m=jz.arr.uniqueBy(n,"gender"),f=jz.arr.uniqueBy(n,"type"),y=jz.arr.uniqueBy(n,"book").map(function(t){function e(t,e){return r.filter(function(a){return a.type==t&&a.gender==e})[0].count}var a=n.filter(function(e){return e.book==t}),r=[];return f.forEach(function(t){m.forEach(function(e){r.push({type:t,gender:e,count:a.filter(function(a){return a.type==t&&a.gender==e}).length})})}),{book:t,murderer_man:e("murderer","man"),murderer_woman:e("murderer","woman"),victim_man:e("victim","man"),victim_woman:e("victim","woman")}});s.domain(f),u.domain(d3.extent(n,function(t){return t.book_year})),c.append("text").attr("class","time-label").attr("x",e<510?4-o.left:-o.left).attr("y",0).attr("dy",-10).text("Time ↓");for(var h=(c.selectAll(".top-label").data(f).enter().append("text").attr("class","top-label").attr("x",function(t){return s(t)+s.bandwidth()/2}).attr("y",-o.top).attr("dy",12).text(function(t){return jz.str.toStartCase(t)+"s"}),f.map(function(t){var e=n.filter(function(e){return e.type==t});return{type:t,data:jz.arr.pivot(e,"gender")}})),b=(c.selectAll(".count-label").data(h).enter().append("text").attr("class","count-label").attr("x",function(t){return s(t.type)+s.bandwidth()/2}).attr("y",-o.top).attr("dy",30).html(function(t){return"<tspan style='fill: "+r.man+"'>"+t.data[0].count+" men</tspan> &amp; <tspan style='fill: "+r.woman+"'>"+t.data[1].count+" women</tspan>"}),d3.forceSimulation(n).force("y",d3.forceY(function(t){return u(t.book_year)}).strength(1)).force("x",d3.forceX(function(t){return s(t.type)+s.bandwidth()/2})).force("collide",d3.forceCollide(p+1)).stop()),g=0;g<250;++g)b.tick();f.forEach(function(t){var e="murderer"==t?d3.axisLeft(u):d3.axisRight(u);e.tickFormat(function(t){return+t}).tickSizeOuter(0).tickSizeInner("murderer"==t?-l:0),c.append("g").attr("class","axis").attr("transform","translate("+("murderer"==t?0:l)+", 0)").call(e)});var v=c.append("g").attr("class","cells").selectAll("g").data(d3.voronoi().extent([[0,0],[l,d]]).x(function(t){return t.x}).y(function(t){return t.y}).polygons(n)).enter().append("g").attr("class",function(t){return"cell "+t.data.type+" "+jz.str.toSlugCase(t.data.name)+" "+jz.str.toSlugCase(t.data.book)});v.append("path").attr("d",function(t){return void 0==t?null:"M"+t.join("L")+"Z"});v.append("circle").attr("r",p).style("fill",function(t){return r[t.data.gender]}).attr("cx",function(t){return void 0==t?null:t.data.x}).attr("cy",function(t){return void 0==t?null:t.data.y}),c.selectAll(".cell").on("mouseover",i),d3.event=document.createEvent("MouseEvent"),d3.event.initMouseEvent("mouseover");var w=n.filter(function(t){return"The Clocks"==t.book})[0];d3.timeout(function(){i({data:w})},2e3)})}function drawWeapons(){function t(t){var e=o.selectAll(".bar").data(t,function(t){return t.name}),a=o.selectAll(".amount").data(t,function(t){return t.name});o.selectAll(".label").data(t,function(t){return t.name}).enter().append("text").attr("class","label").attr("x",-6).attr("y",function(t){return l(t.name)+l.bandwidth()/2}).attr("dy",5).text(function(t){return t.name}).style("text-anchor","end");e.enter().append("rect").attr("class","bar").attr("x",0).attr("y",function(t){return l(t.name)}).attr("width",function(t){return i(t.value)}).attr("height",l.bandwidth()).attr("fill","#df5a49"),a.enter().append("text").attr("class","amount").attr("x",function(t){return i(t.value)}).attr("y",function(t){return l(t.name)+l.bandwidth()/2}).attr("dy",5).attr("dx",function(t){return 1==t.value?6:-6}).text(function(t){return t.value}).style("fill",function(t){return 1==t.value?"black":"white"}).style("text-anchor",function(t){return 1==t.value?"start":"end"})}$("#weapon-chart").empty();var e={left:110},a=d3.marcon().top(0).bottom(0).left(e.left).right(0).width($(window).width()<600?$(window).width()-40:d3.min([600,$(window).width()])).height($(window).width()<600?350:500).element("#weapon-chart");a.render();var n=a.innerWidth(),r=a.innerHeight(),o=a.svg(),i=d3.scaleLinear().range([0,n]),l=d3.scaleBand().rangeRound([0,r]).padding(.25);d3.axisTop(i).tickSize(r),d3.axisLeft(l);d3.csv("data/weapons.csv",function(e,a){a.forEach(function(t){return t.value=+t.value,t}),i.domain([0,d3.max(a,function(t){return t.value})]),l.domain(a.map(function(t){return t.name})),t(a)}),d3.selection.prototype.tspans=function(t,e){return this.selectAll("tspan").data(t).enter().append("tspan").text(function(t){return t}).attr("x",0).attr("dy",function(t,a){return a?e||15:0})},d3.wordwrap=function(t,e){var a=t.split(" "),n=[],r=[],o=e||40,i=0;return a.forEach(function(t){i+t.length>o&&(n.push(r.join(" ")),r.length=0,i=0),i+=t.length,r.push(t)}),r.length&&n.push(r.join(" ")),n}}function preloader(t,e){d3.select("body").append("div").attr("id","preload-"+e),document.getElementById&&(document.getElementById("preload-"+e).style.background="url("+t+") no-repeat -9999px -9999px")}function addLoadEvent(t){var e=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){e&&e(),t()}}var isMobile=!1;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(isMobile=!0),$(".hover-tap").html(isMobile?"Tap":"Hover");var w=$(window).width();$(document).ready(function(){drawTable(),drawGender(),drawWeapons()}),$(window).smartresize(function(){$(window).width()!=w&&(drawTable(),drawGender(),drawWeapons(),w=$(window).width())}),d3.json("data/image-list.json",function(t,e){if(t)throw t;e.forEach(function(t,e){addLoadEvent(preloader("img/covers/"+t,e))})});